---
title: "Introduction to group05pkg"
output: rmarkdown::html_vignette
vignette: >
  %\VignetteIndexEntry{package_name-vignette}
  %\VignetteEngine{knitr::rmarkdown}
  %\VignetteEncoding{UTF-8}
---

```{r, include = FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  comment = "#>",
  warning = FALSE,
  message = FALSE
)
```

```{r load_all, include=FALSE}
devtools::load_all(".")
```

Data analysis requires a structured approach that involves cleaning, wrangling,
modeling, and evaluating the performance of different models. However, these 
tasks can be challenging, and traditional approaches of writing large code chunks
to run this kind of analysis can be time-consuming and error-prone.

**This is where the package group05pkg comes in!**

It provides a set of easy-to-use functions that simplify the process of running
a classification analysis such as:

- Split your data set into train and test
- Create the components of a classification model such as the KNN specification,
a recipe, cross-validation folds, and a grid of hyperparameters that can be used
to tune the performance of a model.
- Evaluate the accuracy of your model. 
- Plot histograms and scatterplots to visualize your analysis. 

This document introduces you to group05pkgâ€™s basic set of tools, and shows you 
how to apply them to run a classification analysis.

## Data: drug_consumption
To explore the package, we will be using the `drug_consumption` data set.This data
set has `1884 rows` and `32 columns`.

```{r setup, include = FALSE}
library(group05pkg)
```

```{r drug-consumption}
drug_consumption <- readr::read_csv("https://archive.ics.uci.edu/ml/machine-learning-databases/00373/drug_consumption.data")

colnames(drug_consumption) <- c(
  "ID", "Age", "Gender", "Education", "Country", "Ethnicity",
  "Nscore", "Escore", "Oscore", "Ascore", "Cscore",
  "Impulsive", "SS", "Alcohol", "Amphet", "Amyl", "Benzos",
  "Caff", "Cannabis", "Choc", "Coke", "Crack", "Ecstasy",
  "Heroin", "Ketamine", "Legalh", "LSD", "Meth", "Mushrooms",
  "Nicotine", "Semer", "VSA"
)
head(drug_consumption)
```

## Functions

We can break down our functions into 3 different groups: 

- EDA 
- Visualizations
- Classification Models

### EDA

#### 1. Split the dataset into training and testing sets 

The `split_dataset` is a function that splits a dataset into training and test sets. The function takes in a dataset, a strata variable, and a predictor variable as inputs and performs a stratified random split of the dataset into training and testing subsets.

`data_set` argument is a data frame containing the original data that will be split into training and testing sets. `strata_variable` is a string specifying the variable in `data_set` that will be used as a stratification variable for the split. `predictor` is a string that indicates the variable in the `data_set` that is going to be considered as the predictor variable.

The function returns a list that contains the training set and testing set. 

For example, we can use `split_dataset()` function by providing `data_set = drug_consumption`, `strata_dariable = "Canabis"` and `predictor = "Nicotine"`. This will split our `drug_consumption` into train and test sets.

```{r split_dataset}
split_data <- split_dataset(drug_consumption, "Cannabis", "Nicotine")
train_data <- split_data[[1]]
test_data<- split_data[[2]]

```

#### 2. Clean and wrangle data

The `wrangle_training_data` function takes in a training dataset, a predictor variable, a strata variable, and group labels as inputs, and returns a data frame with 4 columns that are named "predictor", "strata_variable", "n", and "label". 

The function groups the training data by the predictor and strata variable, summarizes the number of observations in each group, and lastly  adds a label column with group labels that are defined by the user.

`training_data` argument is a data frame that contains the training data that is going to be wrangled and cleaned. `predictor` argument is a string that spcifies the variable in the training data that is gonna be used as the predictor variable. `strata_variable` is a string that specifies the variable in the training data to be used as the stratification variable.`group_labels` is a list of strings that are going to be used as labels for the groups in the resulting data frame.

For example we can use `wrangle_training_data` function by providing `training_data = train_data`, `strata_dariable = "Canabis"` and `predictor = "Nicotine"` and `group_labels = labels` where `lables` is defined as  `c("Neither", "Cannabis only", "Nicotine only", "Both")`. 

As a result, the function will return  a data frame with four columns: predictor, strata_variable, n, label.

```{r wrangle_training_data}
labels<- c("Neither", "Cannabis only", "Nicotine only", "Both")
wrangle_training_data(train_data, "Cannabis", "Nicotine", labels)
```

### Visualizations

#### 1. Build a horizontal histogram with `horizontal_hist()`




#### 2. Build a scatter plot with `scatterplot()`


#### 3. Build a plot to help understand the accuracies with `accuracy_plot()`

### Classification Models 

#### 1. Create knn specification with `create_knn_spec()`

create_knn_spec() is a function in R that creates a specification object for 
k-nearest neighbor models. The function takes one argument, weight_func, which
is a string that specifies the weight function to use in the model.

The function creates a specification object using the nearest_neighbor() function
from the parsnip package. The weight_func argument is used to set the weight 
function in the specification object.

The neighbors parameter is set as a tuning parameter using the tune() function. 
This means that the number of neighbors will be selected based on the best 
performance during model training.

The specification object is then set to use the kknn engine and set to 
classification mode. Finally, the function returns the specification object.

To use the create_knn_spec() function, you simply provide a string for the 
weight_func argument. For example, to create a specification object with a weight 
function of "triangular", you can use the following code:

```{r create-knn-spec}
knn_spec <- create_knn_spec("rectangular")
knn_spec
```
#### 2. Create knn specification with `create_recipe()`

